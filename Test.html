<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width", initial-scale="1.0"/>
  <meta charset="utf-8"/>
  <title>Assignment-1</title>
  <link rel="stylesheet" type="text/css" href="W3_Task3.css">     
</head>
<body style="font-size:20px; margin: 0px;">
            
<div style="display: flex;margin: 10 10 0px;">
  <div style="float: left;margin: 5px;">首頁</div>
  <div class="weblist"  >
      <div >交通</div>
      <div style="margin-left: 10px;">住宿</div>
      <div style="margin-left: 10px;">景點</div>
      <div style="margin-left: 10px;">精選</div>
  </div> 
  <div class="phoneicon"> 
      <img src="icon.png" style="height: 28px;">
  </div>
</div>

<div class="headline">Amazing Taipei!!</div>
  
<div class="bigbox">
  <div id="Cards1" style="display: flex;
  flex:calc(100%-60px);"></div>
  <div id="Cards2"></div>
</div>

<script>
  // 使用 Fetch API 從 JSON 資料源中獲取台北市的觀光景點資訊
  window.onload = function() {
    fetch('https://padax.github.io/taipei-day-trip-resources/taipei-attractions-assignment.json')
      .then(response => response.json())
      .then(data => {
        const SpotsData = data.result.results;

        // 使用 forEach() 遍歷景點資訊並動態創建元素並添加到對應的 DOM 中
        SpotsData.slice(0, 3).forEach(spot => {
          const { stitle, file } = spot;

          const mediumbox = document.createElement('div'); //boxinmedium用div標籤
          mediumbox.classList.add('sidebyside');  //boxinmedium的css樣式

          const title = document.createElement('span');  //title用span標籤
          title.textContent = stitle;

          const imageUrls = file.split('https://'); //把每個https://切割
          const firstImageUrl = 'https://' + imageUrls[1];  //只取第一張照片
          const image = document.createElement('img');  //照片用img標籤
          image.classList.add("imgdiv");  //image的css樣式
          image.src = firstImageUrl;  //image的來源

          mediumbox.appendChild(image);  //把image加進boxinmediumbox的標籤裡
          mediumbox.appendChild(title);   //把title加進boxinmediumbox的標籤裡

          document.getElementById('Cards1').appendChild(mediumbox);   //做一個ID讓HTML可以抓到boxinmediumbox的資料

        });

        // 使用 forEach() 遍歷景點資訊並動態創建元素並添加到對應的 DOM 中
        SpotsData.slice(4).forEach(spot => {    //第四筆以後的資料
          const { stitle, file } = spot;

          const smallbox = document.createElement('div');  //下方12格照片+標題的組合>smallbox新增div標籤
          smallbox.classList.add('samllimgbox');   //smallbox的css樣式

          const title = document.createElement('span');   //標題用span標籤
          title.textContent = stitle;
          title.classList.add("smalltitle")   //照片標題的css樣式
 
          const imageUrls = file.split('https://');    
          const firstImageUrl = 'https://' + imageUrls[1];
          const image = document.createElement('img');    
          image.classList.add("smallimgsize");       //照片的css樣式
          image.src = firstImageUrl;

          smallbox.appendChild(image);
          smallbox.appendChild(title);

          document.getElementById('Cards2').appendChild(smallbox);   //ID:Cards讀取smallbox的資料
        });
      })
      .catch(error => {
        console.error('Error fetching data:', error);
      });
  };
</script>
</body>
</html>
